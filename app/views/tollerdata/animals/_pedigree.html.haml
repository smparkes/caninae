%table{style:"width:100%"}
  %tbody
    - animals.each do |animal|
      %tr
        %td{style:"width:#{100*1/generations-5}%"}
          - if animal
            - json = MultiJson.load animal.import_json
            / %font{:size => "2"}= link_name(json)
            %font{:size => "2"}
              - if link
                = link_to link_name(json), tollerdata_animal_path(animal.id)
              - else
                = link_name(json)
            - if generations > 1
              %td{style:"width:#{100*(1-1.0/generations)+5}%"}
                - ancestors = [animal.father, animal.mother]
                / = debug ancestors
                / = ancestors #{generations-1}
                = render partial:"pedigree", locals:{animals:ancestors, |
                                                     generations:generations-1, |
                                                     link:true } |
    
